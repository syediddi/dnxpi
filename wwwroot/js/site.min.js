$(function(){function e(e){var t=e/1024;if(t>1024){var a=t/1024;return a>1024?(a/1024).toFixed(1)+" GB":a.toFixed(1)+" MB"}return t.toFixed(1)+" KB"}function t(){var e={minValue:0,maxValue:100,interpolation:"linear"},t={interpolation:"linear"};o=new SmoothieChart(t),o.streamTo(document.getElementById("IOChartCanvas"),1e3),o.addTimeSeries(n,{strokeStyle:"rgb(0, 255, 0)",fillStyle:"rgba(0, 255, 0, 0.4)",lineWidth:3}),o.addTimeSeries(r,{strokeStyle:"rgb(255, 0, 0)",fillStyle:"rgba(255, 0, 0, 0.3)",lineWidth:3}),i=new SmoothieChart(e),i.streamTo(document.getElementById("cpuChart"),1e3),i.addTimeSeries(l),$("#IOReadSpeed").attr({style:"color:green"}),$("#IOWriteSpeed").attr({style:"color:red"})}function a(t){var a=new Date;n.append(a,t.IOReadSpeed/1048576),r.append(a,t.IOWriteSpeed/1048576),$("#IOReadSpeed").html("Read Speed: "+e(t.IOReadSpeed)),$("#IOWriteSpeed").html("Write Speed: "+e(t.IOWriteSpeed)),l.append(a,t.CpuLoad),$("#CpuUtilization").html("CPU utilization: "+t.CpuLoad+"%");var o=t.PageSize,i=(t.TotalPages-t.AvailablePages)*o;$("#TotalMemory").html("Total: "+e(t.TotalPages*o)),$("#InUseMemory").html("In use: "+e(i)),$("#AvailableMemory").html("Available: "+e(t.AvailablePages*o)),$("#CommitedMemory").html("Commited: "+e(t.CommittedPages*o)),$("#PagedPool").html("Paged: "+e(t.PagedPoolPages*o)),$("#NonPagedPool").html("Non-paged: "+e(t.NonPagedPoolPages*o))}var o,i,n=new TimeSeries,r=new TimeSeries,l=new TimeSeries;t();var d="https:"===document.location.protocol?"wss://":"ws://",m=d+window.location.host+"/api/resourcemanager/systemperf",s=new WebSocket(m);s.onmessage=function(e){var t=JSON.parse(e.data);a(t)},s.onerror=function(e){$("#perfConnectionStatus").html('<p class="warning">Error communicating with device!</p>')},s.onclose=function(e){$("#perfConnectionStatus").html('<p class="warning">Connection to device closed!</p>')}});